<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="210mm"
   height="297mm"
   viewBox="0 0 210 297"
   version="1.1"
   id="svg4838"
   inkscape:version="0.92.1 r15371"
   sodipodi:docname="SimulationBlockDiagram.svg">
  <defs
     id="defs4832" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="282.11948"
     inkscape:cy="685.8805"
     inkscape:document-units="mm"
     inkscape:current-layer="g5515"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1057"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata4835">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <g
       id="g5601"
       transform="matrix(0.26458333,0,0,0.26458333,39.498513,16.163692)">
      <g
         id="g5515">
        <path
           id="path5385"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="M 260,40 V 60 40 49.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5387"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,58.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <rect
           id="rect5389"
           pointer-events="all"
           ry="6"
           rx="6"
           height="40"
           width="120"
           y="0"
           x="200"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5395"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5393">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Initial Parameters</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5391"
               font-size="12px"
               y="24"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Initial Parameters</text>
          </switch>
        </g>
        <path
           id="path5397"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,370 v 29.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5399"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,408.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5401"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,490 v 29.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5403"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,528.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5405"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="M 210,680 H 60 V 250.12"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5407"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 60,241.12 4.5,9 h -9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5409"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,720 v 29.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5411"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,758.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5413"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,640 50,40 -50,40 -50,-40 z"
           inkscape:connector-curvature="0"
           style="fill:#ffffff;stroke:#000000;stroke-miterlimit:10" />
        <g
           id="g5419"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5417">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 678px; margin-left: 215px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">EKF - calculate $\mathbf{\hat{x}}_{k+1}$</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5415"
               font-size="12px"
               y="682"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">EKF - calculate $\mathbf{\hat{x}}_{k+1}$</text>
          </switch>
        </g>
        <path
           id="path5421"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,610 v 19.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5423"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,638.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5425"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 320,100 h 110 v 89.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5427"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 430,198.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5429"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,140 v 29.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5431"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,178.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <ellipse
           id="ellipse5433"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="100"
           cx="260"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5439"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5437">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 100px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Determine sun position and magnetic field for mode of operation</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5435"
               font-size="12px"
               y="104"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Determine sun position and magnetic field for mode of operation</text>
          </switch>
        </g>
        <ellipse
           id="ellipse5441"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="330"
           cx="260"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5447"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5445">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 330px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Calculate $\mathbf{N}_c$ from $\mathbf{\hat{x}}_k$<xhtml:br />
</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5443"
               font-size="12px"
               y="334"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Calculate $\mathbf{N}_c$ from $\mathbf{\hat{x}}_k$</text>
          </switch>
        </g>
        <ellipse
           id="ellipse5449"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="240"
           cx="430"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5455"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5453">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 240px; margin-left: 371px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Calculate $\mathbf{N}_d$ from $\mathbf{x}_k$</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5451"
               font-size="12px"
               y="244"
               x="430"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Calculate $\mathbf{N}_d$ from $\mathbf{x}_k$</text>
          </switch>
        </g>
        <ellipse
           id="ellipse5457"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="450"
           cx="260"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5463"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5461">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 450px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Update $\boldsymbol{\omega}_\mathcal{B}^\mathcal{I}$ with Runge-Kutta</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5459"
               font-size="12px"
               y="454"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Update $\boldsymbol{\omega}_\mathcal{B}^\mathcal{I}$ with Runge-Kutta</text>
          </switch>
        </g>
        <ellipse
           id="ellipse5465"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="570"
           cx="260"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5471"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5469">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 570px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Update $\mathbf{q}$</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5467"
               font-size="12px"
               y="574"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Update $\mathbf{q}$</text>
          </switch>
        </g>
        <rect
           id="rect5473"
           pointer-events="all"
           ry="9"
           rx="9"
           height="60"
           width="120"
           y="760"
           x="200"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5479"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5477">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 790px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Update dataframe with current time step data</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5475"
               font-size="12px"
               y="794"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Update dataframe with current time step data</text>
          </switch>
        </g>
        <path
           id="path5481"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 260,260 v 20 -10 9.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5483"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 260,288.88 -4.5,-9 h 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <ellipse
           id="ellipse5485"
           pointer-events="all"
           ry="40"
           rx="60"
           cy="220"
           cx="260"
           style="fill:#ffffff;stroke:#000000" />
        <g
           id="g5491"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5489">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 220px; margin-left: 201px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Calculate $\mathbf{v}_\mathcal{B}$ for each sensor</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5487"
               font-size="12px"
               y="224"
               x="260"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Calculate $\mathbf{v}_\mathcal{B}$ for each sensor</text>
          </switch>
        </g>
        <path
           id="path5493"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="M 430,280 V 410 H 270.12"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5495"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 261.12,410 9,-4.5 v 9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5497"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="m 120,210 h 50 v -30 h 79.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5499"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 258.88,180 -9,4.5 v -9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5501"
           pointer-events="stroke"
           stroke-miterlimit="10"
           d="M 60,180 V 60 h 189.88"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <path
           id="path5503"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 258.88,60 -9,4.5 v -9 z"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <rect
           id="rect5505"
           pointer-events="all"
           height="60"
           width="120"
           y="180"
           x="0"
           style="fill:#ffffff;stroke:#000000" />
        <path
           id="path5507"
           pointer-events="all"
           stroke-miterlimit="10"
           d="m 12,180 v 60 m 96,-60 v 60"
           inkscape:connector-curvature="0"
           style="fill:none;stroke:#000000;stroke-miterlimit:10" />
        <g
           id="g5513"
           transform="translate(-0.5,-0.5)">
          <switch
             id="switch5511">
            <foreignObject
               style="overflow: visible; text-align: left;"
               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
               height="100%"
               width="100%"
               pointer-events="none">
              <xhtml:div
                 style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 210px; margin-left: 14px;">
                <xhtml:div
                   style="box-sizing: border-box; font-size: 0px; text-align: center;"
                   data-drawio-colors="color: rgb(0, 0, 0); ">
                  <xhtml:div
                     style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Determine whether anomaly occurs</xhtml:div>
                </xhtml:div>
              </xhtml:div>
            </foreignObject>
            <text
               id="text5509"
               font-size="12px"
               y="214"
               x="61"
               style="font-size:12px;font-family:Helvetica;text-anchor:middle;fill:#000000">Determine whether anomaly occurs</text>
          </switch>
        </g>
      </g>
      <switch
         id="switch5523">
        <g
           id="g5517"
           requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
        <a
           id="a5521"
           target="_blank"
           xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems"
           transform="translate(0,-5)" />
      </switch>
    </g>
  </g>
</svg>
